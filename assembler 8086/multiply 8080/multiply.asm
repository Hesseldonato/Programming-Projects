		ORG 800h
		LXI H,TYTUL
		RST 3
		LXI H,AUTOR
		RST 3
		MVI H,2	; Liczba liczb do wpisania
		JMP INPUT

ERROR		MOV B,H
		MOV D,L
		LXI H,ERRORMSG
		RST 3
		MOV H,B
		MOV L,D

START 	MVI A,0Dh 	; [CARRIAGE RETURN]
		RST 1
		MVI A,0Ah	; [LINE FEED]
		RST 1

INPUT		CALL KOMUNIKAT
		MVI B,0
		MVI E,0	; Flaga ilosci cyfr liczby

		RST 2		; Wprowadzenie liczby
		XRI 00110000b ; Maskowanie (0-9)
		STC
		CMC
		CPI 0Ah
		JNC ERROR
		CPI 00h	; Jesli cyfra to 0
		JZ PROCESSINP
		MOV B,A
		INR E

		RST 2
		CPI 0Dh	; [CARRIAGE RETURN]
		JZ PROCESSINP
		XRI 00110000b
		STC
		CMC
		CPI 0Ah
		JNC ERROR
		MOV C,A
		INR E

	 	RST 2
		CPI 0Dh
		JZ PROCESSINP
		XRI 00110000b
		STC
		CMC
		CPI 0Ah
		JNC ERROR
		MOV D,A
		INR E

		MOV A,B ; Sprawdzenie czy maksymalnie 255
		STC
		CMC
		CPI 03h
		JNC ERROR
		JPO PROCESSINP

		MOV A,C
		STC
		CMC
		CPI 06h
		JNC ERROR
		CPI 05h
		JNZ PROCESSINP

		MOV A,D
		STC
		CMC
		CPI 06h
		JNC ERROR  

PROCESSINP	MOV A,E
		STC
		CMC
		CPI 00000010b
		JNZ PROCEED ; Jesli trzycyfrowa lub jednocyfrowa

		XRA A 	; Dla dwucyfrowej liczby
TENS		ADI 10
		DCR B
		JNZ TENS

		ADD C
		DCR H
		JZ CONTROL
		MOV L,A
		JMP START

PROCEED	JC UNITS	; Jesli jednocyfrowa

		XRA A		; Dla trzycyfrowej liczby
HUNDREDS	ADI 100
		DCR B
		JNZ HUNDREDS
		
		MOV E,A	; Jesli cyfra dziesiatek jest 0
		MOV A,C
		CPI 00h
		MOV A,E
		JZ HUNITS

HTENS		ADI 10
		DCR C
		JNZ HTENS

HUNITS	ADD D
		DCR H
		JZ CONTROL
		MOV L,A
		JMP START

UNITS		DCR H		; Dla jednocyfrowej liczby
		MOV A,B
		JZ CONTROL
		MOV L,A
		JMP START

CONTROL	CPI 00h	; Operacja mnozenia
		JZ ZERO
		MOV C,A
		MOV A,L
		CPI 00h
		JZ ZERO
		
		MVI B,0 	; Porownanie do mnozenia
		LXI H,0
		STC
		CMC
		CMP C
		JC MULT
		MOV D,A
		MOV A,C
		MOV C,D

MULT 		DAD B
		DCR A
		JNZ MULT

CONVERTDEC	MVI C,0	; Cyfra
		MVI D,0	; Flaga czy wypisac cyfre '0'
		CALL WYNIKDSP
DTTHOU	MOV A,L
		STC
		CMC
		SUI 00010000b	; LSB dla 10000
		MOV E,A
		MOV A,H
		SBI 00100111b	; MSB dla 10000
		INR C
		JC DISPLAYTT
		MOV H,A
		MOV L,E
		JMP DTTHOU
DISPLAYTT	DCR C
		JZ DTHOU
		MVI D,1
		MOV A,C
		MVI C,0
		ORI 30H
		RST 1

DTHOU		MOV A,L
		STC
		CMC
		SUI 11101000b	; LSB dla 1000
		MOV E,A
		MOV A,H
		SBI 00000011b	; MSB dla 1000
		JC DISPLAYT
		INR C
		MOV H,A
		MOV L,E
		JMP DTHOU
DISPLAYT	MVI A,1
		CMP D
		JZ DTPROCEED
		DCR A
		CMP C
		JZ DHUN
		MVI D,1
DTPROCEED	MOV A,C
		MVI C,0
		ORI 30H
		RST 1

DHUN		MOV A,L
		STC
		CMC
		SUI 01100100b	; LSB dla 100
		MOV E,A
		MOV A,H
		SBI 00000000b	; MSB dla 100
		JC DISPLAYHUN
		INR C
		MOV H,A
		MOV L,E
		JMP DHUN
DISPLAYHUN	MVI A,1
		CMP D
		JZ DHPROCEED
		DCR A
		CMP C
		JZ DTENS
		MVI D,1
DHPROCEED	MOV A,C
		MVI C,0
		ORI 30H
		RST 1

DTENS		MOV A,L
		STC
		CMC
		SUI 00001010b	; LSB dla 10
		MOV E,A
		MOV A,H
		SBI 00000000b	; MSB dla 10
		JC DISPLAYTENS
		INR C
		MOV H,A
		MOV L,E
		JMP DTENS
DISPLAYTENS	MVI A,1
		CMP D
		JZ DTEPROCEED
		DCR A
		CMP C
		JZ DUNITS
		MVI D,1
DTEPROCEED	MOV A,C
		MVI C,0
		ORI 30H
		RST 1

DUNITS	MOV A,L
		ORI 30H
		RST 1
		
		HLT

ZERO		CALL WYNIKDSP
		MVI A,30H
		RST 1
		HLT

KOMUNIKAT 	MOV A,H
		MOV B,H
		MOV D,L
		CPI 1
		JZ LICZBA2
LICZBA1 	LXI H,KOMUN1
		RST 3
		JMP RESZTA
LICZBA2 	LXI H,KOMUN2
		RST 3
RESZTA 	MOV H,B
		MOV L,D
		RET

WYNIKDSP 	MOV B,H
		MOV D,L
	  	LXI H,WYNIK
	  	RST 3
	  	MOV H,B
		MOV L,D
	 	RET


TYTUL  DB 'PROGRAM MNOZACY DWIE PODANE LICZBY Z ZAKRESU 0-255',13,10,'@'
AUTOR  DB 'AUTOR: DOMINIK JALOWIECKI',13,10,10,'@'
KOMUN1 DB 'PODAJ PIERWSZA LICZBE: @' 
KOMUN2 DB 'PODAJ DRUGA LICZBE: @' 
WYNIK	 DB 13,10,'WYNIK: @'
ERRORMSG DB 13,10,'BLAD! WPISZ LICZBE OD 0 DO 255...@'